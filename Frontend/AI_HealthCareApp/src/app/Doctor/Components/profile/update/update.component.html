<h3 class="heading">Update Profile</h3>

<form [formGroup]="updateForm" (ngSubmit)="update()" class="container" id="profileForm" novalidate>
  <div class="row">
    <!-- Other input fields (unchanged) -->
    <div class="col-md-6 mb-3">
      <label for="Name" class="form-label">Name</label>
      <input type="text" id="Name" class="form-control" formControlName="name" placeholder="Enter your name" required>
    </div>

    <div class="col-md-6 mb-3">
      <label for="AboutYou" class="form-label">About You</label>
      <textarea id="AboutYou" rows="12" class="form-control" formControlName="about" placeholder="Tell us about yourself" required></textarea>
    </div>

    <div class="col-md-6 mb-3">
      <label for="Mobileno" class="form-label">Mobile Number</label>
      <input type="text" id="Mobileno" class="form-control" formControlName="mobileNo" placeholder="Enter your mobile number" required pattern="[0-9+\\- ]{7,15}">
    </div>

    <div class="col-md-6 mb-3">
      <label for="Gender" class="form-label">Gender</label>
      <select id="Gender" class="form-select" formControlName="gender" required>
        <option value="" disabled selected>Select your gender</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
        <option value="other">Other</option>
      </select>
    </div>

    <div class="col-md-6 mb-3">
      <label for="Age" class="form-label">Age</label>
      <input type="number" id="Age" class="form-control" formControlName="age" placeholder="Enter your age" min="0" max="120" required>
    </div>

    <div class="col-md-6 mb-3">
      <label for="City" class="form-label">City</label>
      <input type="text" id="City" class="form-control" formControlName="city" placeholder="Enter your city" required>
    </div>

    <!-- Updated Image input with cropping -->
    <div class="col-md-12 mb-3">
      <label for="Image" class="form-label">Profile Image</label>
      <input type="file" id="Image" class="form-control" accept="image/*" (change)="onFileChange($event)">
    </div>

    <!-- Image cropper -->
    <div class="col-md-12 mb-3" *ngIf="imageChangedEvent">
      <image-cropper
        [imageChangedEvent]="imageChangedEvent"
        [maintainAspectRatio]="true"
        [aspectRatio]="1"
        [resizeToWidth]="300"
        format="png"
        (imageCropped)="onImageCropped($event)"
        (imageLoaded)="onImageLoaded()"
        (cropperReady)="onCropperReady()"
        (loadImageFailed)="onLoadImageFailed()"
      ></image-cropper>
    </div>

    <!-- Cropped image preview -->
    <div class="col-md-12 text-center" *ngIf="croppedImage">
      <p class="mb-1">Preview:</p>
      <img [src]="croppedImage" [style.filter]="imageFilter" class="img-thumbnail" style="max-width: 200px;">
      <div class="mt-2">
        <button type="button" class="btn btn-sm btn-secondary me-2" (click)="rotateImage()">Rotate</button>
        <button type="button" class="btn btn-sm btn-secondary" (click)="toggleGrayscale()">Toggle Grayscale</button>
      </div>
    </div>

    <!-- Other form fields -->
    <div class="col-md-6 mb-3">
      <label for="Speciality" class="form-label">Speciality</label>
      <input type="text" id="Speciality" class="form-control" formControlName="speciality" placeholder="Enter your speciality" required>
    </div>

    <div class="col-md-6 mb-3">
      <label for="Experience" class="form-label">Experience (In years)</label>
      <input type="number" id="Experience" class="form-control" formControlName="experience" placeholder="Enter years of experience" min="0" max="80" required>
    </div>

    <div class="col-md-6 mb-3">
      <label for="ClinicName" class="form-label">Clinic Name</label>
      <input type="text" id="ClinicName" class="form-control" formControlName="clinicName" placeholder="Enter clinic name" required>
    </div>

    <div class="col-md-6 mb-3">
      <label for="ClinicAddress" class="form-label">Clinic Address</label>
      <input type="text" id="ClinicAddress" class="form-control" formControlName="clinicAddress" placeholder="Enter clinic address" required>
    </div>

    <div class="col-md-6 mb-3">
      <label for="ConsultationFee" class="form-label">Consultation Fee</label>
      <input type="number" id="ConsultationFee" class="form-control" formControlName="consultationFees" placeholder="Enter consultation fee" min="0" required>
    </div>
  </div>

  <button type="submit" class="btn btn-danger btn-block mt-3">Save Changes</button><h3 class="mt-3 text-warning text-center" id="msg">{{ msg }}</h3>
</form>

